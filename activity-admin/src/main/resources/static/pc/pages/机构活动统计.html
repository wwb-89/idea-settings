<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>机构活动统计</title>
    <link rel="stylesheet" href="../assets/lib/element-ui/lib/theme-chalk/index.css">
    <link rel="stylesheet" href="../assets/css/reset-tongji.css">
    <link rel="stylesheet" href="../assets/css/common.css">
    <link rel="stylesheet" href="../assets/css/activity-detail.css">
</head>

<body>
    <div class="activity-statistics" id="activity-statistics">
        <div class="white-part title-box">
            <div class="clear name-box">
                <span class="title fl">机构活动统计</span>
                <span class="tip fr">
                    <el-button class="btn-customize" round>导出</el-button>
                </span>
            </div>
            <div class="date-box">
                <el-date-picker v-model="time" type="daterange" range-separator="" start-placeholder="开始日期"
                    end-placeholder="结束日期">
                </el-date-picker>
            </div>
        </div>
        <div class="white-part paddingb12">
            <p class="title">概况</p>
            <div class="content1">
                <ul class="count-ul clearfix">
                    <li class="count-li fl">
                        <img class="count-img" src="../assets/images/yd-icon/icon-activity.png" alt="">
                        <div class="text-box">
                            <p>
                                <span class="count-num">200</span>
                            </p>
                            <p class="count-name">活动个数(个)</p>
                        </div>
                    </li>
                    <li class="count-li fl">
                        <img class="count-img" src="../assets/images/yd-icon/icon-eye.png" alt="">
                        <div class="text-box">
                            <p>
                                <span class="count-num">1207</span>
                            </p>
                            <p class="count-name">浏览量(pv)</p>
                        </div>
                    </li>
                    <li class="count-li fl">
                        <img class="count-img" src="../assets/images/yd-icon/icon-shi2.png" alt="">
                        <div class="text-box">
                            <p>
                                <span class="count-num">3260</span>
                            </p>
                            <p class="count-name">浏览人数(uv)</p>
                        </div>
                    </li>
                    <li class="count-li fl">
                        <img class="count-img" src="../assets/images/yd-icon/icon-shi2.png" alt="">
                        <div class="text-box">
                            <p>
                                <span class="count-num">120</span>
                            </p>
                            <p class="count-name">报名人数(人)</p>
                        </div>
                    </li>
                    <li class="count-li fl">
                        <img class="count-img" src="../assets/images/yd-icon/icon-sign-number.png" alt="">
                        <div class="text-box">
                            <p>
                                <span class="count-num">332</span>
                            </p>
                            <p class="count-name">签到数(人·次)</p>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
        <div class="white-part line-box">
            <div class="height417px" id="line-aqxec"></div>
        </div>
        <div class="white-part bar-box">
            <div id="bar-aqxec" class="height336px"></div>
        </div>
        <div class="white-part">
            <div class="clear">
                <p class="title fl">TOP活动榜</p>
            </div>
            <div class="table-box">
                <el-table :data="tableData" style="width: 100%">
                    <el-table-column prop="rank" label="排名" width="50" align="center">
                        <template slot-scope="scope">
                            <span
                                :class="scope.row.rank == 1 ? 'rank one' : scope.row.rank == 2 ? 'rank two' : scope.row.rank == 3 ? 'rank three' : 'rank' ">{{scope.row.rank}}</span>
                        </template>
                    </el-table-column>
                    <el-table-column prop="name" label="活动名称" width="421">
                    </el-table-column>
                    <el-table-column prop="view" label="浏览量" width="234" align="center">
                        <template #header>
                            <div class="number active"> 浏览量<i class="down-icon"></i></div>
                        </template>
                        <template slot-scope="scope">
                            <span class="color">{{scope.row.view}}</span>
                        </template>
                    </el-table-column>
                    <el-table-column prop="num" label="报名人数" align="center">
                        <template #header>
                            <div class="number"> 报名人数<i class="down-icon"></i></div>
                        </template>
                        <template slot-scope="scope">
                            <span class="color">{{scope.row.num}}</span>
                        </template>
                    </el-table-column>
                </el-table>
            </div>
        </div>
    </div>
</body>
<script type="text/javascript" src="../assets/lib/jquery.min.js"></script>
<script src="../assets/lib/echarts4.min.js"></script>
<script src="../assets/lib/vue.js"></script>
<script src="../assets/lib/element-ui/lib/index.js"></script>
<script src="../assets/lib/jquery.nicescroll.min.js"></script>
<script>
    $(function () {
        $('.el-table .number').click(function () {
            $(this).parents('.el-table').find($(' .number')).removeClass('active')
            $(this).addClass('active')
        })
    })
    var vm = new Vue({
        el: '#activity-statistics',
        data: function () {
            return {
                time: '',
                tableData: [{
                    rank: 1,
                    name: '中国梦·中华颂',
                    view: 123,
                    num: 4704
                }, {
                    rank: 2,
                    name: '信息技术学科赛课活动',
                    view: 123,
                    num: 4704
                }, {
                    rank: 3,
                    name: '来杭图看“初见”刘毅·鱼拓展',
                    view: 123,
                    num: 4704
                }, {
                    rank: 4,
                    name: '来杭图看“初见”刘毅·鱼拓展',
                    view: 123,
                    num: 4704
                }, {
                    rank: 5,
                    name: '来杭图看“初见”刘毅·鱼拓展',
                    view: 123,
                    num: 4704
                }]
            }
        },
        mounted: function () {
            /* 条形图 */
            var data1 = ['03-01', '03-26', '04-03', '04-18', '05-13', '05-15', '05-29', '05-30', '05-31',
                '06-01', '06-08', '06-15', '06-22'
            ];
            var data2 = [70, 60, 80, 70, 90, 70, 90, 60, 50, 60, 80, 70, 90, ];
            var data3 = [80, 70, 90, 120, 50, 40, 60, 20, 80, 70, 90, 120, 50];
            // 活动参与趋势
            var myChart1 = echarts.init(document.getElementById('line-aqxec'));
            var option1 = [];
            if (data1.length > 1) {
                option1 = {
                    title: {
                        text: '活动参与趋势图',
                        textStyle: {
                            fontWeight: 500,
                            fontSize: 16,
                            color: '#333333',
                        },
                        left: 0,
                        top: 0,
                    },
                    color: ['#3A8BFF', '#9FE6B8'],
                    legend: {
                        top: 0,
                        right: 00,
                        itemWidth: 8,
                        itemHeight: 8,
                        itemGap: 16,
                        textStyle: {
                            fontWeight: 500,
                            fontSize: 12,
                            color: '#666666'
                        },
                        icon: 'circle',
                        data: ['报名人数', '浏览量']
                    },
                    grid: {
                        bottom: 10,
                        top: 70,
                        left: 0,
                        right: 20,
                        containLabel: true,
                    },
                    tooltip: {
                        trigger: 'axis',
                        backgroundColor: 'rgba(0,0,0,0.7)',
                        padding: [12, 16],
                        axisPointer: {
                            type: 'line',
                            lineStyle: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        }
                    },
                    xAxis: {
                        type: 'category',
                        boundaryGap: false,
                        data: data1,
                        axisLine: {
                            show: true,
                            lineStyle: {
                                color: '#E3ECFB',
                            }
                        },
                        axisTick: {
                            show: false
                        },
                        splitLine: {
                            lineStyle: {
                                color: '#f8f8f8',
                            },
                        },
                        axisLabel: {
                            lineHeight: 40,
                            textStyle: {
                                color: '#767690'
                            }
                        },
                        offset: 10
                    },
                    yAxis: {
                        type: 'value',
                        name: '',
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        splitLine: {
                            lineStyle: {
                                type: 'dashed',
                                color: '#E3ECFB',
                            },
                        },
                        min: 0,
                        max: 120
                    },
                    series: [{
                            name: '报名人数',
                            data: data2,
                            type: 'line',
                            itemStyle: {
                                normal: {
                                    opacity: 0,
                                },
                            },
                            smooth: true,
                            lineStyle: {
                                normal: {
                                    color: '#3A8BFF',
                                    width: 2,
                                }
                            },
                            areaStyle: {
                                normal: {
                                    color: {
                                        type: 'linear',
                                        x: 0,
                                        y: 0,
                                        x2: 0,
                                        y2: 1,
                                        colorStops: [{
                                            offset: 0,
                                            color: 'rgba(58,139,255,0.3)' // 0% 处的颜色
                                        }, {
                                            offset: 1,
                                            color: 'rgba(58,139,255,0)' // 100% 处的颜色
                                        }],
                                        global: false // 缺省为 false
                                    },
                                },
                            },
                        },
                        {
                            name: '浏览量',
                            data: data3,
                            type: 'line',
                            itemStyle: {
                                normal: {
                                    opacity: 0,
                                },
                            },
                            smooth: true,
                            lineStyle: {
                                normal: {
                                    color: '#9FE6B8',
                                    width: 2,
                                }
                            },
                            areaStyle: {
                                normal: {
                                    color: {
                                        type: 'linear',
                                        x: 0,
                                        y: 0,
                                        x2: 0,
                                        y2: 1,
                                        colorStops: [{
                                            offset: 0,
                                            color: 'rgba(159,230,184,0.3)' // 0% 处的颜色
                                        }, {
                                            offset: 1,
                                            color: 'rgba(159,230,184,0)' // 100% 处的颜色
                                        }],
                                        global: false // 缺省为 false
                                    },
                                },
                            },
                        }
                    ]
                };
            } else {
                option1 = {
                    title: {
                        text: '活动参与趋势图',
                        textStyle: {
                            fontSize: 16,
                            color: '#333333',
                        },
                        left: 0,
                        top: 0,
                    },
                    color: ['#3A8BFF', '#9FE6B8'],
                    legend: {
                        top: 0,
                        right: 20,
                        itemWidth: 8,
                        itemHeight: 8,
                        itemGap: 16,
                        textStyle: {
                            fontSize: 12,
                            color: '#666666'
                        },
                        icon: 'circle',
                        data: ['报名人数', '浏览量']
                    },
                    grid: {
                        bottom: 10,
                        top: 70,
                        left: 0,
                        right: 20,
                        containLabel: true,
                    },
                    tooltip: {
                        trigger: 'axis',
                        backgroundColor: 'rgba(0,0,0,0.7)',
                        padding: [12, 16],
                        axisPointer: {
                            type: 'line',
                            lineStyle: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        }
                    },
                    xAxis: {
                        type: 'category',
                        boundaryGap: false,
                        data: ['03-01'],
                        axisLine: {
                            show: true,
                            lineStyle: {
                                color: '#E3ECFB',
                            }
                        },
                        axisTick: {
                            show: false
                        },
                        splitLine: {
                            lineStyle: {
                                color: '#f8f8f8',
                            },
                        },
                        axisLabel: {
                            lineHeight: 40,
                            textStyle: {
                                color: '#767690'
                            }
                        },
                    },
                    yAxis: {
                        type: 'value',
                        name: '',
                        axisLine: {
                            show: false
                        },
                        axisTick: {
                            show: false
                        },
                        splitLine: {
                            lineStyle: {
                                type: 'dashed',
                                color: '#E3ECFB',
                            },
                        },
                        min: 0,
                        max: 120
                    },
                    series: [{
                            name: '报名人数',
                            data: [5],
                            type: 'line',
                            lineStyle: {
                                normal: {
                                    color: '#3A8BFF',
                                    width: 2,
                                }
                            },
                            areaStyle: {
                                normal: {
                                    color: {
                                        type: 'linear',
                                        x: 0,
                                        y: 0,
                                        x2: 0,
                                        y2: 1,
                                        colorStops: [{
                                            offset: 0,
                                            color: 'rgba(58,139,255,0.3)' // 0% 处的颜色
                                        }, {
                                            offset: 1,
                                            color: 'rgba(58,139,255,0)' // 100% 处的颜色
                                        }],
                                        global: false // 缺省为 false
                                    },
                                },
                            },
                        },
                        {
                            name: '浏览量',
                            data: [3],
                            type: 'line',
                            lineStyle: {
                                normal: {
                                    color: '#9FE6B8',
                                    width: 2,
                                }
                            },
                            areaStyle: {
                                normal: {
                                    color: {
                                        type: 'linear',
                                        x: 0,
                                        y: 0,
                                        x2: 0,
                                        y2: 1,
                                        colorStops: [{
                                            offset: 0,
                                            color: 'rgba(159,230,184,0.3)' // 0% 处的颜色
                                        }, {
                                            offset: 1,
                                            color: 'rgba(159,230,184,0)' // 100% 处的颜色
                                        }],
                                        global: false // 缺省为 false
                                    },
                                },
                            },
                        }
                    ]
                };
            }
            myChart1.setOption(option1);

            window.onload = function () {
                myChart1.resize();
            }
            window.onresize = function () {
                myChart1.resize();
            }
            /* 饼图 */
            var myChart2 = echarts.init(document.getElementById('bar-aqxec'));
            var pieData = [{
                    value: 24,
                    name: '展览',
                    itemStyle: {
                        normal: {
                            color: "#4694FF"
                        }
                    },
                },
                {
                    value: 12,
                    name: '会议',
                    itemStyle: {
                        normal: {
                            color: "#9FE6B8"
                        }
                    },
                },
                {
                    value: 8,
                    name: '打卡',
                    itemStyle: {
                        normal: {
                            color: "#FF9F7F"
                        }
                    },
                },
                {
                    value: 4,
                    name: '阅读',
                    itemStyle: {
                        normal: {
                            color: "#FB7293"
                        }
                    },
                },
                {
                    value: 1,
                    name: '兴趣',
                    itemStyle: {
                        normal: {
                            color: "#FDB107"
                        }
                    },
                }
            ];
            var option2 = {
                title: {
                    text: '活动类型分布',
                    textStyle: {
                        fontWeight: 500,
                        fontSize: 16,
                        color: '#333333',
                    },
                    left: 0,
                    top: 0,
                },
                tooltip: {
                    trigger: 'item',
                    padding: [12, 16],
                    formatter: function (param) {
                        return param.name + "<br>" + param.marker + '占比：' + param.percent + '%'
                    }
                },
                legend: {
                    data: ['展览', '会议', '打卡', '阅读', '兴趣'],
                    textStyle: {
                        fontSize: 12,
                        color: '#333'
                    },
                    formatter: function (name) {
                        const val = pieData.filter(function (item) {
                            return item.name === name
                        })
                        return '{a|' + name + '}{b|' + val[0].value + '个}'
                    },
                    textStyle: {
                        rich: {
                            a: {
                                fontSize: 12,
                                color: '#666666',
                                align: 'left',
                            },
                            b: {
                                width: 500,
                                fontSize: 12,
                                color: '#333333',
                                align: 'left',
                                padding: [0, 0, 0, 36]
                            },
                        }
                    },
                    icon: 'circle',
                    itemWidth: 8,
                    itemHeight: 8,
                    itemGap: 20,
                    y: 'center',
                    x: '60%'
                },
                series: [{
                    type: 'pie',
                    radius: '60%',
                    radius: ['50%', '70%'],
                    center: ['40%', '50%'],
                    label: {
                        normal: {
                            show: true,
                            position: 'center',
                            formatter: '{total|' + 200 + '}' + '\n\r' + '{active|活动数（个）}',
                            rich: {
                                total: {
                                    fontSize: 32,
                                    color: '#565E64'
                                },
                                active: {
                                    fontSize: 14,
                                    color: '#91A0B5',
                                    lineHeight: 30,
                                    fontWeight: 'normal'
                                },
                            }
                        },

                    },
                    emphasis: {
                        show: true,
                    },
                    labelLine: {
                        normal: {
                            show: false
                        }
                    },
                    data: pieData
                }]
            }
            myChart2.setOption(option2);
            window.onload = function () {
                myChart2.resize();
            }
            window.onresize = function () {
                myChart2.resize();
            }
        },
        methods: {

        }
    })
</script>

</html>
