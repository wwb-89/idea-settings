<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../assets/lib/element-ui/lib/theme-chalk/index.css">
    <link rel="stylesheet" href="../assets/css/upDownStructure.css">
    <title>上下结构</title>
</head>

<body>
    <div class="container" id="vue">
        <div class="header">
            <div class="title">
                <div class="title-box">成都少儿阅读活动之“阅读之星爱阅读之星爱阅读之星爱</div>
                <div class="title-pop">
                    <div class="img">
                        <img src="../assets/images/example.jpg" alt="">
                    </div>
                    <div class="pop-info">
                        <p class="color333 fs14 font600">书香浙江 云享阅读2020浙江省云阅读计划之“晒书房计划之“晒书房</p>
                        <p class="color666 fs14 info-time">2020.10.10 9:00 ～ 2028.10.1 16:00</p>
                        <div id="qrCodeMini" v-on:click="qrPopFunc"></div>
                        <p class="fs12 color999">扫码访问首页</p>
                    </div>
                </div>
            </div>
            <div class="menu">
                <div class="menu-item active"><a href="#">学生报名</a></div>
                <div class="menu-item"><a href="#">企业报名</a></div>
                <div class="menu-item"><a href="#">互动</a></div>
                <div class="menu-item"><a href="#">征集设置</a></div>
                <div class="menu-item"><a href="#">讨论</a></div>
                <div class="menu-item"><a href="#">考核管理</a></div>
                <div class="menu-item"><a href="#">奖项管理</a></div>
                <div class="menu-item"><a href="#">证书</a></div>
                <div class="menu-item"><a href="#">统计</a></div>
                <div class="menu-item"><a href="#">设置</a></div>
            </div>
            <!--更多-->
            <el-dropdown class="right-more-drop" @command="handleCommand">
                  <span class="el-dropdown-link">
                    <i class="el-icon-more"></i>
                  </span>
                <el-dropdown-menu slot="dropdown" class="header-more-drop">
                    <el-dropdown-item command="a" :class="dropActive=='a'?'drop-active':''">设置</el-dropdown-item>
                    <el-dropdown-item command="b" :class="dropActive=='b'?'drop-active':''">统计</el-dropdown-item>
                    <el-dropdown-item command="c" :class="dropActive=='c'?'drop-active':''">证书</el-dropdown-item>
                </el-dropdown-menu>
            </el-dropdown>
            <div class="clear"></div>
        </div>
        <div class="content">
<!--            <iframe id="ifr" src="test2.html"></iframe>-->
        </div>

        <!--正常二维码-->
        <el-dialog
                :visible.sync="dialogQrCodeVisible"
                custom-class="qrCode-dialog"
                width="428px"
                center>
            <p class="tips">扫码访问</p>
            <div class="inner">
                <div id="qrCode"></div>
            </div>

        </el-dialog>
    </div>
</body>
</html>
<script type="text/javascript" src="../assets/lib/jquery.min.js"></script>
<script src="../../assets/js/vue.min.js"></script>
<script src="../assets/lib/layui/layui.js"></script>
<script src="../assets/lib/element-ui/lib/index.js"></script>
<script src="../assets/lib/jquery.qrcode.min.js"></script>
<script>
    window.onload = function () {
        resizePageHeight();
      menuFunc();
    };

    function resizePageHeight () {
        // container的最小高度
        var containerMinHeight = $(".container").css("min-height");
        containerMinHeight = containerMinHeight.replace(/px/gi, "");
        var containerHeight = $(".container").height();
        // 窗口的高度
        var windowHeight = $(window).height() - 40;
        // iframe的高度
        var iframeHeight = $("#content").height();
        // iframe中内容的真实高度
        var iframeContentHeight = $("#content").contents().find("body").find("div:first-child").height() + 24;
        // container应该取最大高度
        var maxHeight = containerMinHeight > containerHeight ? containerMinHeight : containerHeight;
        maxHeight = maxHeight > windowHeight ? maxHeight : windowHeight;
        maxHeight = maxHeight > iframeHeight ? maxHeight : iframeHeight;
        maxHeight = maxHeight > iframeContentHeight ? maxHeight : iframeContentHeight;
        // 如果窗口高度能满足最大高度就是用窗口高度
        if (windowHeight > iframeContentHeight) {
            maxHeight = windowHeight;
        }
        $(".container").height(maxHeight);
        $("#content").height(maxHeight);
        $("#content").contents().find("body").height(maxHeight);
    }

    function menuFunc() {
      $('.menu .menu-item').on('click', function () {
        $(this).siblings().removeClass('active');
        $(this).addClass('active');
      })
    }

    var vm = new Vue({
        el: '#vue',
        data: function () {
            return {
              dropActive: 'a',
              dialogQrCodeVisible: true,
            }
        },
        created: function () {


        },
        mounted: function () {
            this.$nextTick(function (){
                $('#qrCodeMini').qrcode({
                    text: "http://www.jq22.com",
                      width: 62,
                      height: 62
                });
              $('#qrCode').qrcode({
                text: "http://www.jq22.com",
                width: 300,
                height: 300
              });
            });

        },
        methods: {
          handleCommand(command) {
            console.log(command)
            this.dropActive = command;
          },
          qrPopFunc: function () {
            this.dialogQrCodeVisible=true;
          }
        }
    });

</script>
