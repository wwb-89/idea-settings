<!DOCTYPE html>
<html lang="en">

<head>
    <title>奖项管理</title>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui" />
    <meta name="format-detection" content="telephone=no, email=no">
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="cache-control" content="no-cache" />
    <link rel="stylesheet" href="../assets/lib/layui/css/layui.css" />
    <link rel="stylesheet" href="../assets/css/public.css" />
    <link rel="stylesheet" href="../assets/css/dialog.css">
    <link rel="stylesheet" href="../assets/css/award-manage.css">
</head>

<body>
    <div class="award-manage" id="award-manage">
        <div class="award-box" style="display: block;">
            <div class="award-item" data-type="0" @touchstart.capture="touchStart" @touchend.capture="touchEnd">
                <div class="award-detail">
                    <div class="detail-t overHidden2">趣自然 · 阅当夏一等奖</div>
                    <div class="detail-n overHidden1">二等奖</div>
                </div>
                <span class="award-num overHidden1">69 <span class="layui-icon layui-icon-right"></span></span>
                <div class="del-btn">
                    <span @click="delDialogStatus=true">删除</span>
                </div>
            </div>
            <div class="award-item" data-type="0" @touchstart.capture="touchStart" @touchend.capture="touchEnd">
                <div class="award-detail">
                    <div class="detail-t overHidden2">阅往昔·致未来</div>
                    <div class="detail-n overHidden1">二等奖</div>
                </div>
                <span class="award-num overHidden1">69 <span class="layui-icon layui-icon-right"></span></span>
                <div class="del-btn">
                    <span @click="delDialogStatus=true">删除</span>
                </div>
            </div>
            <div class="award-item" data-type="0" @touchstart.capture="touchStart" @touchend.capture="touchEnd">
                <div class="award-detail">
                    <div class="detail-t overHidden2">趣自然 · 阅当夏一等奖阅当夏一等奖阅当阅当夏一等奖阅当阅当夏一等奖阅当夏一等奖</div>
                    <div class="detail-n overHidden1">二等奖</div>
                </div>
                <span class="award-num overHidden1">69 <span class="layui-icon layui-icon-right"></span></span>
                <div class="del-btn">
                    <span @click="delDialogStatus=true">删除</span>
                </div>
            </div>
            <div class="award-item" data-type="0" @touchstart.capture="touchStart" @touchend.capture="touchEnd">
                <div class="award-detail">
                    <div class="detail-t overHidden2">趣自然 · 阅当夏</div>
                    <div class="detail-n overHidden1">二等奖</div>
                </div>
                <span class="award-num overHidden1">69 <span class="layui-icon layui-icon-right"></span></span>
                <div class="del-btn">
                    <span @click="delDialogStatus=true">删除</span>
                </div>
            </div>
            <div class="award-item" data-type="0" @touchstart.capture="touchStart" @touchend.capture="touchEnd">
                <div class="award-detail">
                    <div class="detail-t overHidden2">趣自然 · 阅当夏</div>
                    <div class="detail-n overHidden1">二等奖</div>
                </div>
                <span class="award-num overHidden1">69 <span class="layui-icon layui-icon-right"></span></span>
                <div class="del-btn">
                    <span @click="delDialogStatus=true">删除</span>
                </div>
            </div>
            <div class="award-item" data-type="0" @touchstart.capture="touchStart" @touchend.capture="touchEnd">
                <div class="award-detail">
                    <div class="detail-t overHidden2">趣自然 · 阅当夏</div>
                    <div class="detail-n overHidden1">二等奖</div>
                </div>
                <span class="award-num overHidden1">69 <span class="layui-icon layui-icon-right"></span></span>
                <div class="del-btn">
                    <span @click="delDialogStatus=true">删除</span>
                </div>
            </div>
            <div class="award-item" data-type="0" @touchstart.capture="touchStart" @touchend.capture="touchEnd">
                <div class="award-detail">
                    <div class="detail-t overHidden2">趣自然 · 阅当夏</div>
                    <div class="detail-n overHidden1">二等奖</div>
                </div>
                <span class="award-num overHidden1">69 <span class="layui-icon layui-icon-right"></span></span>
                <div class="del-btn">
                    <span @click="delDialogStatus=true">删除</span>
                </div>
            </div>
            <div class="award-item" data-type="0" @touchstart.capture="touchStart" @touchend.capture="touchEnd">
                <div class="award-detail">
                    <div class="detail-t overHidden2">趣自然 · 阅当夏</div>
                    <div class="detail-n overHidden1">二等奖</div>
                </div>
                <span class="award-num overHidden1">69 <span class="layui-icon layui-icon-right"></span></span>
                <div class="del-btn">
                    <span @click="delDialogStatus=true">删除</span>
                </div>
            </div>
        </div>
        <!-- 无数据 -->
        <div class="empty-content" style="display: none;">暂无数据，请选创建奖项</div>
        <!-- 到底了提示 -->
        <div class="bot-tips" style="display: block;">已经到底了</div>

        <!-- 底部按钮 -->
        <div class="bot-content">
            <div class="bot-btn">创建奖项</div>
        </div>
        <!-- 删除弹框 -->
        <div class="dialog" v-if="delDialogStatus">
            <div class="content">
                <div class="switch">
                    <div class="other-del">确定删除吗?</div>
                    <div class="del" @click="delHanlde">删除</div>
                </div>
                <div class="cancel" @click="delDialogStatus=false">
                    取消
                </div>
            </div>
        </div>

        <div class="toast" v-show="delToastStatus">删除成功</div>
    </div>

    <script src="../assets/lib/jquery.1.8.2.min.js"></script>
    <script src="../assets/lib/jqthumb.min.js"></script>
    <script src="../assets/lib/vue.js"></script>
    <script src="../assets/lib/layui/layui.js"></script>
    <script>
        $(function () {

        })

        var vm = new Vue({
            el: '#award-manage',
            data: function () {
                return {
                    // 删除弹出框
                    delDialogStatus: false,
                    delToastStatus: false
                }
            },
            methods: {
                //滑动开始
                touchStart(e) {
                    this.startX = e.touches[0].clientX;
                },
                //滑动结束
                touchEnd(e) {
                    let currentElement = e.currentTarget;
                    this.endX = e.changedTouches[0].clientX;
                    // 左滑
                    if (currentElement.dataset.type == 0 && this.startX - this.endX > 30) {
                        this.restSlide();
                        currentElement.dataset.type = 1;
                    }
                    // 右滑
                    if (currentElement.dataset.type == 1 && this.startX - this.endX < -30) {
                        this.restSlide();
                        currentElement.dataset.type = 0;
                    }
                    this.startX = 0;
                    this.endX = 0;
                },
                //复位滑动状态
                restSlide() {
                    let itemList = document.querySelectorAll('.award-item');
                    for (let i = 0; i < itemList.length; i++) {
                        itemList[i].dataset.type = 0;
                    }
                },
                delHanlde: function () {
                    var _this = this;
                    this.delToastStatus = true;
                    setTimeout(function () {
                        _this.delToastStatus = false;
                    }, 1500)
                    this.delDialogStatus = false;
                }
            }
        })
    </script>
</body>

</html>