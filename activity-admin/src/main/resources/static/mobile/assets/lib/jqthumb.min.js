/*!
    jQThumb v2.3.6
    Copyright (c) 2013-2016
    Released under the MIT license.

    Author       : Pak Cheong
    Version      : 2.3.6
    Repo         : git@github.com:pakcheong/jqthumb.git
    Demo         : http://pakcheong.github.io/jqthumb/
    Last Updated : Sunday, April 10th, 2016, 2:42:38 PM
    Requirements : jQuery >=v1.3.0 or Zepto (with zepto-data plugin) >=v1.0.0
*/
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof exports==="object"){module.exports=a(require("jquery"))}else{a((function(){if(typeof jQuery!=="undefined"){return jQuery}else{if(typeof Zepto!=="undefined"){return Zepto}}return $})())}}}(function(f){function h(z,A){if(window.console){if(typeof z!="undefined"&&z&&typeof A!="undefined"&&A){z=z.toLowerCase();if(z=="error"){console.error(A)}else{if(z=="log"){console.log(A)}else{console.error('"'+z+'" is not supported as console type.')}}}}}function y(z){z=f.trim(z.toString());if(z.toLowerCase()==="auto"){return z}return parseFloat(z)}function q(B,z){var A=B.toString().match(/(-*)+\d+/)[0];if(i(B)=="px"){if(B<0){return 0}else{if(B>z){return z}else{return B}}}else{if(i(B)=="%"){if(A<0){return"0%"}else{if(A>100){return"100%"}else{return B}}}}}function i(z){var A=z.toString().match(/\d+(.*)/i);if(A){switch(f.trim(A[1])){case"":return"px";case"px":return"px";case"%":return"%";default:break}}return""}var w=(function(){var B=document.createElement("div"),A="Khtml Ms O Moz Webkit".split(" "),z=A.length;return function(D){if(D in B.style){return true}D=D.replace(/^[a-z]/,function(E){return E.toUpperCase()});for(var C in A){if(A[C]+D in B.style){return true}}return false}})();if(!f.fn.outerHeight||!f.fn.outerWidth){if(typeof Array.prototype.forEach!="function"){Array.prototype.forEach=function(A){for(var z=0;z<this.length;z++){A.apply(this,[this[z],z,this])}}}["width","height"].forEach(function(A){var B,z=A.replace(/./,function(C){return C[0].toUpperCase()});if(!f.fn["outer"+z]){f.fn["outer"+z]=function(){var E=this;if(E){var C=E[A]();var D={"width":["left","right"],"height":["top","bottom"]};D[A].forEach(function(F){C+=parseInt(E.css("margin-"+F),10);C+=parseInt(E.css("padding-"+F),10);C+=parseInt(E.css("border-"+F+"-width"),10)});return C}else{return null}}}})}if(!f.fn.unwrap){f.fn.unwrap=function(){this.parent().each(function(){if(!f.nodeName(this,"body")){f(this).replaceWith(this.childNodes)}}).end()}}var k=function(A,D){var C=f(window),B=A.offset(),z={top:C.scrollTop(),left:window.scrollX};z.right=z.left+C.width();z.bottom=z.top+C.height();B.right=B.left+A.outerWidth();B.bottom=B.top+A.outerHeight();D=(D)?y(D):0;return(!(z.right<(B.left-D)||z.left>(B.right+D)||z.bottom<(B.top-D)||z.top>(B.bottom+D)))};var a="jqthumb",r=f(window),g=(function(){var A=["scroll","resize","scrolltop"];var B={};for(var z=0;z<A.length;z++){B[A[z]]=A[z]+"."+a}return B})(),n=(function(){var z=[];f.each(g,function(A,B){z.push(B)});return z.join(" ")})(),p="click."+a,o="mouseenter."+a,c=a+"-render-position",v=a+"-original-styles",x=a+"-inviewport",l=a+"-options",s=a+"-status",d=a+"-onetime-event",t=a+"-ongoing-event",u=a+"-responsive",j=a+"tmp-img",e={outputElems:[],inputElems:[]},m={classname:a,width:100,height:100,position:{x:"50%",y:"50%"},source:"src",responsive:20,zoom:1,show:true,renderPosition:"before",onDemand:false,onDemandEvent:"scroll",threshold:0,method:"auto",reinit:true,error:function(){},before:function(){},after:function(){},done:function(){}};function b(A,z){f.fn[a].defaults=f.extend({},m,f.fn[a].defaults);this.element=A;this.settings=f.extend({},f.fn[a].defaults,z);this.settings.onDemandEvent=this.settings.onDemandEvent.toLowerCase();this.settings.threshold=this.settings.threshold.toString().replace(/px/gi,"");this.settings.width=this.settings.width.toString().replace(/px/gi,"");this.settings.height=this.settings.height.toString().replace(/px/gi,"");if(!this.settings.width){z.width=m.width;this.settings.width=m.width}if(!this.settings.height){z.height=m.height;this.settings.height=m.height}this.settings.position.y=q(this.settings.position.y,this.settings.width);this.settings.position.x=q(this.settings.position.x,this.settings.height);this.settings.zoom=(this.settings.zoom<0)?0:this.settings.zoom;if(typeof z=="string"){if(z.toLowerCase()=="kill"){this.kill(this.element)}}else{f(this.element).data(l,this.settings);this.init(this.element,this.settings)}}b.prototype={kill:function(A){var z=f(A);function D(E){r.unbind(n,E.data(t));r.unbind(g.resize,E.data(u));E.parent().unbind(p,E.data(d));E.parent().unbind(o,E.data(d));E.removeAttr("style");if(!E.data(v)){E.attr("style",E.data(v));E.removeData(v)}if(E.data(a)){E.removeData(a)}if(E.data(l)){E.removeData(l)}if(E.data(x)){E.removeData(x)}if(E.data(c)){E.removeData(c)}if(E.data(s)){E.removeData(s)}if(E.data(d)){E.removeData(d)}if(E.data(t)){E.removeData(t)}if(E.data(j)){E.removeData(j)}}if(z.data(a)){var B=[],C=(function(){if(z.data(c)==="after"){return z.next()}return z.prev()})();if(C&&C.data(a)!==a){if(z.data(s)==="error"){D(z);
		return false}else{if(z.data(l).onDemand===false){h("error","Could not find the generated element.");return false}else{D(z)}}}B=[];f.each(e.outputElems,function(E,F){if(f(F)[0]!=C[0]){B.push(e.outputElems[E])}});e.outputElems=B;B=[];f.each(e.inputElems,function(E,F){if(f(F)[0]!=z[0]){B.push(e.inputElems[E])}});e.inputElems=B;r.unbind(g.resize);C.remove();D(z)}},lazyload:function(E,C,D,z){var B=f(C),A=B.data(j),F=(B.attr(D.source))?B.attr(D.source):"";A.onload=function(){z(A)};A.onerror=function(){D.error.apply(C,[C,(F)?F:undefined]);B.data(s,"error");E.kill(B)};A.src=F},processImg:function(B,D,A,C){var E=this,z=f(B),F=z.attr(D.source);C({tmpImgDom:A,oriImg:z,width:A.naturalWidth,height:A.naturalHeight,done:function(G){if(D.show===true){G.show()}D.after.apply(B,[G]);E.updateGlobal(B,G,D)}})},init:function(B,C){function G(K){var I=(f.trim(C.width.toString().toLowerCase())==="auto")?K.tmpImgDom.width.toString():C.width,N=(f.trim(C.height.toString().toLowerCase())==="auto")?K.tmpImgDom.height.toString():C.height,H=C.zoom,P=C.position.x,O=C.position.y,L,J;L=f("<div/>").css({"width":y(I)+i(I),"height":y(N)+i(N),"display":"none","position":"relative","overflow":"hidden"}).addClass(C.classname).data(a,a);J=f("<div/>").css({"width":"100%","height":"100%","background-image":'url("'+F+'")',"background-repeat":"no-repeat","background-position":y(P)+i(P)+" "+y(O)+i(O),"background-size":"cover"}).appendTo(L);var M=K.oriImg.parent().find("div.jqthumb").length;if(M<1){if(C.renderPosition.toLowerCase()==="after"){L.insertAfter(K.oriImg)}else{L.insertBefore(K.oriImg)}}L.show();J.css({"width":parseFloat(100*H)+"%","height":parseFloat(100*H)+"%","position":"absolute"}).css({"top":(function(){var Q=L.height(),R=J.height();if(i(O)=="%"){return"-"+parseFloat((R-Q)/Q*100/(100/y(O)))+"%"}})(),"left":(function(){var Q=L.width(),R=J.width();if(i(P)=="%"){return"-"+parseFloat((R-Q)/Q*100/(100/y(P)))+"%"}})()});L.hide();if(typeof K.done==="function"){K.done(L)}}function z(P){var Q=P.tmpImgDom.width,J=P.tmpImgDom.height,L=(f.trim(C.width.toString().toLowerCase())==="auto")?Q.toString():C.width,S=(f.trim(C.height.toString().toLowerCase())==="auto")?J.toString():C.height,I=C.zoom,U=C.position.x,T=C.position.y,N=i(L),H=i(S),K=C.responsive,R,M;M=f(P.tmpImgDom);R=f("<div />");function O(){var V=0;if(Q>J){M.css({"width":"auto","max-height":99999999,"min-height":0,"max-width":99999999,"min-width":0,"height":R.height()+"px"});V=M.height()/M.width();if(M.width()<R.width()){M.css({"width":R.width()*I,"height":parseFloat(R.width()*V)*I})}else{M.css({"width":M.width()*I,"height":parseFloat(M.width()*V)*I})}}else{M.css({"width":R.width()+"px","max-height":99999999,"min-height":0,"max-width":99999999,"min-width":0,"height":"auto"});V=M.width()/M.height();if(M.height()<R.height()){M.css({"width":parseFloat(R.height()*V)*I,"height":R.height()*I})}}if(I<1){var W=f("<div />");W.css({"width":parseFloat(y(L.toString())*I)+i(L.toString()),"height":parseFloat(y(S.toString())*I)+i(S.toString()),"position":"relative","overflow":"hidden"}).appendTo(M.parent());M.appendTo(W)}M.css({"position":"absolute","left":(function(){var X=0;if(i(U)=="%"){X=parseFloat((M.width()-M.parent().width())/100*y(U));return(X<=0)?X+"px":"-"+X+"px"}else{if(i(U)=="px"||isNaN(U)===false){return y(U)+"px"}}})(),"top":(function(){var X=0;if(i(T)=="%"){X=parseFloat((M.height()-M.parent().height())/100*y(T));return(X<=0)?X+"px":"-"+X+"px"}else{if(i(T)=="px"||isNaN(T)===false){return y(T)+"px"}}})()})}if(C.renderPosition.toLowerCase()==="after"){R.insertAfter(P.oriImg)}else{R.insertBefore(P.oriImg)}R.append(M).css({"position":"relative","overflow":"hidden","width":y(L)+(N?N:"px"),"height":y(S)+(H?H:"px")}).data(a,a);O();if(!isNaN(K)&&K>0){f(P.oriImage).data(u,function(){setTimeout(function(){O()},K)});r.bind(g.resize,f(P.oriImage).data(u))}R.hide().addClass(C.classname);if(typeof P.done==="function"){P.done(R)}}C.before.apply(B,[B]);var D=this,A=f(B),F=A.attr(C.source),E=(function(H){if(H=="auto"){if(w("backgroundSize")===false){return z}return G}else{if(H=="modern"){return G}else{if(H=="native"){return z}else{h("error",'Invalid method. Only "auto", "modern" and "native" are allowed.')}}}})(C.method.toString().toLowerCase());if(E){A.data(v,A.attr("style"));A.data(c,C.renderPosition);A.hide();if(C.onDemand===true){D.demand(B,C,F,E)}else{A.data(j,new Image());D.lazyload(D,B,C,function(H){D.processImg(B,C,H,E);A.removeData(j)})}}else{A.data(s,"error");D.kill(A)}},demand:function(F,H,G,A){var z=this,C=f(F);if(H.onDemandEvent==="scroll"){C.wrap("<div />");var E=C.parent();E.css({"width":((H.width)?y(H.width)+i(H.width):C.width()+"px"),"height":((H.height)?y(H.height)+i(H.height):C.height()+"px")});C.data(t,function(){if(k(E,H.threshold)){r.unbind(n,C.data(t));C.removeData(t);C.unwrap();C.data(j,new Image());z.lazyload(z,F,H,function(I){z.processImg(F,H,I,A);C.removeData(j)})}});r.bind(n,C.data(t)).triggerHandler(g.scroll)}else{if(H.onDemandEvent==="click"||H.onDemandEvent==="mouseenter"){var B=C.parent(),D=((H.onDemandEvent==="click")?p:o);
		C.data(d,function(){B.unbind(D,C.data(d));C.removeData(d);C.data(j,new Image());z.lazyload(z,F,H,function(I){z.processImg(F,H,I,A);C.removeData(j)});C.data(x,true)});B.bind(D,C.data(d))}}},updateGlobal:function(z,B,A){z.global.outputElems.push(f(B)[0]);z.global.elemCounter++;e.outputElems.push(f(B)[0]);if(z.global.elemCounter==z.global.inputElems.length){A.done.apply(z,[z.global.outputElems])}}};f.fn[a]=function(z){var B={},A={elemCounter:0,outputElems:[],inputElems:(function(G){var F=f(G),E=F.length,D=[];for(var C=0;C<E;C++){D.push(F.get(C))}return D})(f(this))};B[a]=function(C){if(typeof C=="undefined"){h("error","Please specify an action like $."+a+'("killall")');return}C=C.toLowerCase();if(C=="killall"){f.each(e.inputElems,function(){new b(this,"kill")})}};f.extend(f,B);return this.each(function(){var C=f(this);this.global=A;e.inputElems.push(C);if(typeof z=="string"){new b(this,z)}else{if(C.data(j)&&C.data(j).complete===false){C.data(j).src="";new b(this,"kill")}if(!C.data(a)){C.data(a,new b(this,z))}else{if(C.data(l)&&C.data(l).reinit===true){new b(this,"kill");C.data(a,new b(this,z))}}}})};f.fn[a].defaults=m}));