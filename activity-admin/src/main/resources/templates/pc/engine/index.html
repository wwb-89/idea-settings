<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org/">
<head>
    <title>字段设置</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/pc/assets/lib/element-ui/lib/theme-chalk/index.css" th:href="@{/pc/assets/lib/element-ui/lib/theme-chalk/index.css}">
    <link rel="stylesheet" href="/static/pc/assets/css/public.css" th:href="@{/pc/assets/css/public.css}">
    <link rel="stylesheet" href="/static/pc/assets/css/engine-design.css" th:href="@{/pc/assets/css/engine-design.css}">
</head>
<body>
    <div class="field-setting" id="field-setting" v-cloak>
        <div class="top-con">
            <div class="go-back white-border-btn" v-if="loaded && currTemplateId" @click="returnBack"><i></i><span>返回</span></div>
            <div class="step-box">
                <img src="/static/pc/assets/images/yq-design/step2-active.png" th:src="@{/pc/assets/images/yq-design/step2-active.png}" alt="">
                <img src="/static/pc/assets/images/yq-design/step3-normal.png" th:src="@{/pc/assets/images/yq-design/step3-normal.png}" alt="">
            </div>
            <div class="look-div fr">
<!--                <div class="btn-width80px-color1">预览</div>-->
                <div class="btn-width80px-color2" v-if="loaded && currTemplateId" @click="publish">发布</div>
            </div>
        </div>
        <div class="content">
            <div class="w-900px choose-mould" v-show="!loaded || !currTemplateId">
                <p class="title">请选择模版</p>
                <ul class="mould">
                    <li class="mould-item" v-for="template in templates" @click="templateChange(template.id)">
                        <div class="img-box"><img src="/static/pc/assets/images/yq-design/cover.png" th:src="@{/pc/assets/images/yq-design/cover.png}" alt=""></div>
                        <p>{{template.name}}</p>
                    </li>
                </ul>
            </div>
            <div class="w-900px info-box" style="display: block;" v-show="currTemplateId && loaded">
                <form action="" id="drag-box">
                    <!-- 基本信息 -->
                    <div class="title sort-item">
                        <i class="icon-drag"></i>
                        <div class="lable">基本信息</div>
                        <div class="icon-div">
                            <i class="icon-edit" @click="textDialog=true"></i>
                            <i class="icon-delete" @click="delDialog=true"></i>
                        </div>
                    </div>
                    <div class="form-item sort-item">
                        <i class="icon-drag"></i>
                        <div class="icon-div">
                            <i class="icon-edit" @click='activityNameDialog=true'></i>
                        </div>
                        <label class="label required">活动名称</label>
                        <div class="input-box">
                            <el-input type="text" placeholder="请填写" maxlength="20" show-word-limit readonly></el-input>
                        </div>
                    </div>
                    <div class="form-item sort-item">
                        <i class="icon-drag"></i>
                        <div class="icon-div">
                            <i class="icon-edit" @click="activityTimeDialog=true"></i>
                        </div>
                        <label class="label required">活动时间</label>
                        <div class="input-box">
                            <el-date-picker type="daterange"
                                            start-placeholder="开始时间"
                                            end-placeholder="结束时间"
                                            format="yyyy-MM-dd"
                                            value-format="yyyy-MM-dd"
                                            prefix-icon="disable"
                                            clear-icon="disable"
                                            unlink-panels
                                            readonly>
                                <img style="margin: 0 8px;" slot="range-separator" src="/static/pc/assets/images/swap-right.png" th:src="@{/pc/assets/images/swap-right.png}">
                            </el-date-picker>
                            <span class="date-piker-icon"><img src="/static/pc/assets/images/calendar.png" th:src="@{/pc/assets/images/calendar.png}"></span>
                        </div>
                    </div>
                    <div class="form-item sort-item">
                        <i class="icon-drag"></i>
                        <div class="icon-div">
                            <i class="icon-edit" @click="textDialog=true"></i>
                        </div>
                        <label class="label required">封面</label>
                        <div class="input-box">
                            <div class="img-box">
                                <img src="/static/pc/assets/images/img.png" th:src="@{/pc/assets/images/img.png}" alt="" class="cover-img jqthumbImg">
                            </div>
                            <div class="font-box">
                                <p>建议尺寸：1080x500</p>
                                <p>大小：小于5M</p>
                                <p>格式：jpg、png、gif</p>
                                <div class="blue-border-btn upload">上传文件</div>
                            </div>
                        </div>
                    </div>
                    <div class="form-item sort-item">
                        <i class="icon-drag"></i>
                        <div class="icon-div">
                            <i class="icon-edit" @click="activityFormDialog=true"></i>
                            <i class="icon-delete" @click="delDialog=true"></i>
                        </div>
                        <label class="label">活动形式</label>
                        <div class="input-box">
                            <div>
                                <el-radio v-model="radio1" label="1" name="active-type" class="radio-item" readonly>线下活动</el-radio>
                                <el-radio label="2" name="active-type" class="radio-item" readonly>线上活动</el-radio>
                            </div>
                            <div class="address-box">
                                <el-input type="text" placeholder="请输入活动地点" autocomplete="off" class="address-input" readonly></el-input>
                                <img src="/static/pc/assets/images/location.png" th:src="@{/pc/assets/images/location.png}" alt="" class="address-icon">
                                <el-input type="text" placeholder="详细地址，例：E5栋1308室" autocomplete="off" class="detaile-address" readonly></el-input>
                            </div>
                        </div>
                    </div>
                    <div class="form-item sort-item">
                        <i class="icon-drag"></i>
                        <div class="icon-div">
                            <i class="icon-edit" @click="activityTypeDialog=true"></i>
                        </div>
                        <label class="label">活动类型</label>
                        <div class="input-box">
                            <el-input type="text" v-model="activityType" placeholder="请选择" autocomplete="off" class="select-input" readonly></el-input>
                            <img src="/static/pc/assets/images/yq-design/arrow-down-small.png" th:src="@{/pc/assets/images/yq-design/arrow-down-small.png}" alt="" class="arrow-down">
                            <p class="tips first">辅助说明文字，这是最长效果这是最长效果这是最长效果这是最长效果这是最长效果这是最长</p>
                        </div>
                    </div>
                    <div class="form-item sort-item">
                        <i class="icon-drag"></i>
                        <div class="icon-div">
                            <i class="icon-edit" @click="activityNameDialog=true"></i>
                            <i class="icon-delete"></i>
                        </div>
                        <label class="label">活动标签</label>
                        <div class="input-box">
                            <div class="type-item">
                                <i class="add_btn"></i>新增
                            </div>
                        </div>
                    </div>
                    <div class="form-item sort-item">
                        <i class="icon-drag"></i>
                        <div class="icon-div">
                            <i class="icon-edit" @click="activityNameDialog=true"></i>
                            <i class="icon-delete"></i>
                        </div>
                        <label class="label">参与范围</label>
                        <div class="input-box">
                            <div class="type-item">
                                <div class="add_btn"></div>选择
                            </div>
                        </div>
                    </div>
                    <!-- 特殊活动报名设置 -->
                    <div class="title sort-item">
                        <i class="icon-drag"></i>
                        <div class="lable">特殊活动报名设置</div>
                        <div class="icon-div">
                            <i class="icon-edit" @click="switchDialog=true"></i>
                            <i class="icon-delete" @click="delDialog=true"></i>
                        </div>
                        <div class="input-box">
                            <el-switch v-model="delivery1" class="switch fl marginTop6" disabled></el-switch>
                            <p class="tips second">辅助说明文字，这是最长效果这是最长效果这是最长效果这是最长效果这是最长效果这是最</p>
                        </div>
                    </div>
                    <div class="form-item sort-item">
                        <i class="icon-drag"></i>
                        <div class="icon-div">
                            <i class="icon-edit"></i>
                        </div>
                        <label class="label required">报名时间</label>
                        <div class="input-box">
                            <el-date-picker type="daterange"
                                            start-placeholder="开始时间"
                                            end-placeholder="结束时间"
                                            format="yyyy-MM-dd"
                                            value-format="yyyy-MM-dd"
                                            prefix-icon="disable"
                                            clear-icon="disable"
                                            unlink-panels
                                            readonly>
                                <img style="margin: 0 8px;" slot="range-separator" src="/static/pc/assets/images/swap-right.png" th:src="@{/pc/assets/images/swap-right.png}">
                            </el-date-picker>
                            <span class="date-piker-icon"><img src="/static/pc/assets/images/calendar.png" th:src="@{/pc/assets/images/calendar.png}"></span>
                        </div>
                    </div>
                    <div class="form-item sort-item">
                        <i class="icon-drag"></i>
                        <div class="icon-div">
                            <i class="icon-edit"></i>
                            <i class="icon-delete"></i>
                        </div>
                        <label class="label">人数限制</label>
                        <div class="input-box">
                            <el-input type="text" v-model="person" placeholder="请选择" autocomplete="off" class="select-input" readonly></el-input>
                            <img src="/static/pc/assets/images/yq-design/arrow-down-small.png" th:src="@{/pc/assets/images/yq-design/arrow-down-small.png}" alt="" class="arrow-down">
                            <div class="person-box">
                                <el-input type="number" placeholder="请输入正整数" readonly></el-input>
                                <span class="person-span">人</span>
                            </div>
                        </div>
                    </div>
                    <div class="form-item sort-item">
                        <i class="icon-drag"></i>
                        <div class="icon-div">
                            <i class="icon-edit"></i>
                            <i class="icon-delete"></i>
                        </div>
                        <label class="label">信息填写</label>
                        <div class="input-box">
                            <el-switch class="switch fl marginTop6" disabled></el-switch>
                            <p class="tips third">开启后，报名者需填写信息</p>
                        </div>
                    </div>
                    <div class="form-item sort-item">
                        <i class="icon-drag"></i>
                        <div class="icon-div">
                            <i class="icon-edit"></i>
                            <i class="icon-delete"></i>
                        </div>
                        <label class="label">报名需审核</label>
                        <div class="input-box">
                            <el-switch class="switch fl marginTop6" disabled></el-switch>
                            <p class="tips third">开启后，参与需发起人审核</p>
                        </div>
                    </div>
                    <div class="form-item sort-item">
                        <i class="icon-drag"></i>
                        <div class="icon-div">
                            <i class="icon-edit"></i>
                            <i class="icon-delete"></i>
                        </div>
                        <label class="label">报名名单公开</label>
                        <div class="input-box">
                            <el-switch class="switch fl marginTop6" disabled></el-switch>
                            <p class="tips third">开启后，所有人都能看到报名人员名单</p>
                        </div>
                    </div>
                    <!-- 签到设置 -->
                    <div class="title sort-item">
                        <i class="icon-drag"></i>
                        <div class="lable">签到设置</div>
                        <div class="icon-div">
                            <i class="icon-edit"></i>
                            <i class="icon-delete"></i>
                        </div>
                        <div class="input-box">
                            <el-switch v-model="delivery1" class="switch fl marginTop6" disabled></el-switch>
                        </div>
                    </div>
                    <div class="form-item sort-item">
                        <i class="icon-drag"></i>
                        <div class="icon-div">
                            <i class="icon-edit"></i>
                            <i class="icon-delete"></i>
                        </div>
                        <label class="label required">签到方式</label>
                        <div class="input-box sign-in">
                            <el-radio v-model="radio1" label="1" class="radio-item" readonly>普通签到</el-radio>
                            <el-radio label="2" class="radio-item">位置签到</el-radio>
                            <el-radio label="3" class="radio-item">二维码签到</el-radio>
                            <!-- 如果勾选可多选 -->
                            <!-- <el-checkbox-group v-model="radio1" disabled>
                                <el-checkbox label="普通签到"></el-checkbox>
                                <el-checkbox label="位置签到"></el-checkbox>
                                <el-checkbox label="二维码签到"></el-checkbox>
                            </el-checkbox-group> -->
                        </div>
                    </div>
                    <div class="form-item sort-item">
                        <i class="icon-drag"></i>
                        <div class="icon-div">
                            <i class="icon-edit"></i>
                        </div>
                        <label class="label required">签到时间</label>
                        <div class="input-box">
                            <el-date-picker type="daterange"
                                            start-placeholder="开始时间"
                                            end-placeholder="结束时间"
                                            format="yyyy-MM-dd"
                                            value-format="yyyy-MM-dd"
                                            prefix-icon="disable"
                                            clear-icon="disable"
                                            unlink-panels
                                            readonly>
                                <img style="margin: 0 8px;" slot="range-separator" src="/static/pc/assets/images/swap-right.png" th:src="@{/pc/assets/images/swap-right.png}">
                            </el-date-picker>
                            <span class="date-piker-icon"><img src="/static/pc/assets/images/calendar.png" th:src="@{/pc/assets/images/calendar.png}"></span>
                        </div>
                    </div>
                    <div class="form-item sort-item">
                        <i class="icon-drag"></i>
                        <div class="icon-div">
                            <i class="icon-edit"></i>
                            <i class="icon-delete"></i>
                        </div>
                        <label class="label">签到人员名单公开</label>
                        <div class="input-box">
                            <el-switch class="switch fl marginTop6" disabled></el-switch>
                            <p class="tips third">开启后，所有人都能看到报名人员名单</p>
                        </div>
                    </div>
                    <!-- 签退设置 -->
                    <div class="title sort-item">
                        <i class="icon-drag"></i>
                        <div class="lable">签退设置</div>
                        <div class="icon-div">
                            <i class="icon-edit"></i>
                            <i class="icon-delete"></i>
                        </div>
                        <div class="input-box">
                            <el-switch v-model="delivery1" class="switch fl marginTop6" disabled></el-switch>
                        </div>
                    </div>
                    <div class="form-item sort-item">
                        <i class="icon-drag"></i>
                        <div class="icon-div">
                            <i class="icon-edit"></i>
                            <i class="icon-delete"></i>
                        </div>
                        <label class="label required">签退方式</label>
                        <div class="input-box sign-in">
                            <el-radio v-model="radio1" label="1" class="radio-item" readonly>普通签退</el-radio>
                            <el-radio label="2" class="radio-item">位置签退</el-radio>
                            <el-radio label="3" class="radio-item">二维码签退</el-radio>
                        </div>
                    </div>
                    <div class="form-item sort-item">
                        <i class="icon-drag"></i>
                        <div class="icon-div">
                            <i class="icon-edit"></i>
                        </div>
                        <label class="label required">签退时间</label>
                        <div class="input-box">
                            <el-date-picker type="daterange"
                                            start-placeholder="开始时间"
                                            end-placeholder="结束时间"
                                            format="yyyy-MM-dd"
                                            value-format="yyyy-MM-dd"
                                            prefix-icon="disable"
                                            clear-icon="disable"
                                            unlink-panels
                                            readonly>
                                <img style="margin: 0 8px;" slot="range-separator" src="/static/pc/assets/images/swap-right.png" th:src="@{/pc/assets/images/swap-right.png}">
                            </el-date-picker>
                            <span class="date-piker-icon"><img src="/static/pc/assets/images/calendar.png" th:src="@{/pc/assets/images/calendar.png}"></span>
                        </div>
                    </div>
                    <div class="form-item sort-item">
                        <i class="icon-drag"></i>
                        <div class="icon-div">
                            <i class="icon-edit"></i>
                            <i class="icon-delete"></i>
                        </div>
                        <label class="label">签退名单公开</label>
                        <div class="input-box">
                            <el-switch class="switch fl marginTop6" disabled></el-switch>
                            <p class="tips third">开启后，所有人都能看到报名人员名单</p>
                        </div>
                    </div>
                </form>
                <div class="add-circle" @click="addFieldDialog = true" id="add-circle"></div>
            </div>
        </div>
        <!--拖拽排序的提示-->
        <div id="dragBubble" class="bubble">拖动可排序</div>
        <!-- 确认删除模块弹框 -->
        <div class="dialog-mask" v-show="delDialog">
            <div class="dailog delete-dailog">
                <img src="/static/pc/assets/images/yq-design/warn.png" th:src="@{/pc/assets/images/yq-design/warn.png}" alt="">
                <p class="text">删除后，可重新添加。确定删除？</p>
                <div class="btn-box">
                    <div class="border-btn">保留</div>
                    <div class="normal-btn" @click="delDialog=false">删除</div>
                </div>
            </div>
        </div>
        <!-- 添加字段弹窗 -->
        <div class="dialog-mask" v-show="addFieldDialog">
            <div class="dailog add-field">
                <div class="header">
                    <span>添加字段</span>
                    <i class="close" @click="addFieldDialog=false"></i>
                </div>
                <div class="body">
                    <div class="down-list">
                        <p class="down-btn">
                            <span>基本信息</span>
                            <i class="down-icon"></i>
                        </p>
                        <ul class="item-list">
                            <li>基本信息</li>
                            <li>学生报名</li>
                            <li>企业报名</li>
                        </ul>
                    </div>
                    <div class="field-item">
                        <p class="field overHidden1">参与范围</p>
                        <el-tooltip class="tooltip" effect="dark" content="说明文字单行效果" placement="top">
                            <i class="icon-info"></i>
                        </el-tooltip>
                        <div class="fr add-btn">
                            <i class="icon-add"></i>
                            <span class="aready" style="display: none;">已添加</span>
                            <span class="remove" style="display: none;">移除</span>
                        </div>
                    </div>
                    <div class="field-item aready-add">
                        <p class="field overHidden1">活动时间活动时间活动</p>
                        <el-tooltip class="tooltip" effect="dark" content="说明文字单行效果" placement="top">
                            <i class="icon-info"></i>
                        </el-tooltip>
                        <div class="fr add-btn">
                            <i class="icon-add" style="display: none;"></i>
                            <span class="aready">已添加</span>
                            <span class="remove" style="display: none;">移除</span>
                        </div>
                    </div>
                    <div class="field-item">
                        <p class="field overHidden1">活动时间活动时间活动</p>
                        <el-tooltip class="tooltip" effect="dark" content="说明文字多行效果说明文字多行效果说明文字多行效果说明文字多行效果说明文字多行效果" placement="top">
                            <i class="icon-info"></i>
                        </el-tooltip>
                        <div class="fr add-btn">
                            <i class="icon-add"></i>
                            <span class="aready" style="display: none;">已添加</span>
                            <span class="remove" style="display: none;">移除</span>
                        </div>
                    </div>
                    <div class="field-item">
                        <p class="field overHidden1">活动标签</p>
                        <el-tooltip class="tooltip" effect="dark" content="说明文字单行效果" placement="top">
                            <i class="icon-info"></i>
                        </el-tooltip>
                        <div class="fr add-btn">
                            <i class="icon-add"></i>
                            <span class="aready" style="display: none;">已添加</span>
                            <span class="remove" style="display: none;">移除</span>
                        </div>
                    </div>
                    <div class="field-item">
                        <p class="field overHidden1">活动形式</p>
                        <el-tooltip class="tooltip" effect="dark" content="说明文字单行效果" placement="top">
                            <i class="icon-info"></i>
                        </el-tooltip>
                        <div class="fr add-btn">
                            <i class="icon-add"></i>
                            <span class="aready" style="display: none;">已添加</span>
                            <span class="remove" style="display: none;">移除</span>
                        </div>
                    </div>
                    <div class="field-item">
                        <p class="field overHidden1">活动类型</p>
                        <el-tooltip class="tooltip" effect="dark" content="说明文字单行效果" placement="top">
                            <i class="icon-info"></i>
                        </el-tooltip>
                        <div class="fr add-btn">
                            <i class="icon-add"></i>
                            <span class="aready" style="display: none;">已添加</span>
                            <span class="remove" style="display: none;">移除</span>
                        </div>
                    </div>
                    <div class="field-item" @click="addFieldDialog=false,textDialog=true">
                        <p class="field overHidden1">文本字段</p>
                        <el-tooltip class="tooltip" effect="dark" content="说明文字单行效果" placement="top">
                            <i class="icon-info"></i>
                        </el-tooltip>
                    </div>
                    <div class="field-item" @click="addFieldDialog=false,chooseDialog=true">
                        <p class="field overHidden1">选择字段</p>
                        <el-tooltip class="tooltip" effect="dark" content="说明文字单行效果" placement="top">
                            <i class="icon-info"></i>
                        </el-tooltip>
                    </div>
                    <div class="field-item" @click="addFieldDialog=false,partitionDialog=true">
                        <p class="field overHidden1">分区</p>
                        <el-tooltip class="tooltip" effect="dark" content="说明文字单行效果" placement="top">
                            <i class="icon-info"></i>
                        </el-tooltip>
                    </div>
                </div>
                <div class="footer">
                    <div class="btn-box">
                        <div class="border-btn">取消</div>
                        <div class="normal-btn">确定</div>
                    </div>
                </div>
            </div>
        </div>
        <!-- 文本字段弹窗 -->
        <div class="dialog-mask" v-show="textDialog">
            <div class="dailog text-field">
                <div class="header">
                    <span>文本字段</span>
                    <i class="close" @click="textDialog=false"></i>
                </div>
                <div class="body">
                    <div class="custom-box">
                        <span>自定义字段</span>
                        <span class="fr">ID 212667</span>
                    </div>
                    <div class="form">
                        <el-input v-model="title" type="text" placeholder="标题" maxlength="8" show-word-limit class="marginBottom24"></el-input>
                        <el-input v-model="explain" type="text" placeholder="辅助说明" maxlength="40" show-word-limit class="marginBottom24"></el-input>
                        <div class="switch-box">
                            <label class="label">必填项</label>
                            <el-switch class="switch" v-model="switch1"></el-switch>
                        </div>
                    </div>
                </div>
                <div class="footer">
                    <div class="btn-box">
                        <div class="border-btn">取消</div>
                        <div class="normal-btn disable">确定</div>
                        <div class="normal-btn">确定</div>
                    </div>
                </div>
            </div>
        </div>
        <!-- 选择字段弹窗 -->
        <div class="dialog-mask" v-show="chooseDialog"> 
            <div class="dailog choose-field">
                <div class="header">
                    <span>选择字段</span>
                    <i class="close" @click="chooseDialog=false"></i>
                </div>
                <div class="body">
                    <div class="custom-box">
                        <span>自定义字段</span>
                        <span class="fr">ID 212667</span>
                    </div>
                    <div class="form">
                        <el-input v-model="title" type="text" placeholder="标题" maxlength="8" show-word-limit class="marginBottom24"></el-input>
                        <el-input v-model="explain" type="text" placeholder="辅助说明" maxlength="40" show-word-limit class="marginBottom24"></el-input>
                        <div class="choose-box">
                            <div class="input-box" v-for="(item,index) in option1">
                                <label class="label">选项{{index + 1}}</label>
                                <el-input v-model="item.title" type="text" placeholder="请输入" class="weight348"></el-input>
                                <i :class="[delclick ? 'del-circle' : 'del-circle disable']" @click="delOption1(index)"></i>
                            </div>
                        </div>
                        <div class="add-option" @click="addOption1">
                            <i></i>添加选项
                        </div>
                        <div class="switch-box">
                            <label class="label">必填项</label>
                            <el-switch class="switch" v-model="switch1"></el-switch>
                            <label class="label">允许多选</label>
                            <el-switch class="switch" v-model="switch2"></el-switch>
                        </div>
                    </div>
                </div>
                <div class="footer">
                    <div class="btn-box">
                        <div class="border-btn">取消</div>
                        <div class="normal-btn disable">确定</div>
                        <!-- <div class="normal-btn">确定</div> -->
                    </div>
                </div>
            </div>
        </div>
        <!-- 分区弹窗 -->
        <div class="dialog-mask" v-show="partitionDialog">
            <div class="dailog">
                <div class="header">
                    <span>分区</span>
                    <i class="close" @click="partitionDialog=false"></i>
                </div>
                <div class="body">
                    <div class="custom-box">
                        <span>分区组件可以区隔配置项目</span>
                    </div>
                    <div class="form">
                        <el-input v-model="title" type="text" placeholder="标题" maxlength="8" show-word-limit class="marginBottom24"></el-input>
                        <el-input v-model="explain" type="text" placeholder="辅助说明" maxlength="40" show-word-limit class="marginBottom24"></el-input>
                        <div class="switch-box">
                            <label class="label">允许关闭</label>
                            <el-switch class="switch" v-model="switch1"></el-switch>
                        </div>
                    </div>
                </div>
                <div class="footer">
                    <div class="btn-box">
                        <div class="border-btn">取消</div>
                        <div class="normal-btn disable">确定</div>
                    </div>
                </div>
            </div>
        </div>
        <!-- 特定字段弹窗 -->
        <!-- 活动名称 -->
        <div class="dialog-mask" v-show="activityNameDialog">
            <div class="dailog">
                <div class="header">
                    <span>活动名称</span>
                    <i class="close" @click="activityNameDialog=false"></i>
                </div>
                <div class="body">
                    <div class="custom-box">
                        <span>主要字段，活动的名称</span>
                    </div>
                    <div class="form">
                        <el-input v-model="name" type="text" placeholder="标题" maxlength="8" show-word-limit class="marginBottom24"></el-input>
                        <el-input v-model="explain" type="text" placeholder="辅助说明" maxlength="40" show-word-limit class="marginBottom24"></el-input>
                        <div class="switch-box">
                            <label class="label">必填项</label>
                            <el-switch class="switch" v-model="switch3"></el-switch>
                        </div>
                    </div>
                </div>
                <div class="footer">
                    <div class="btn-box">
                        <div class="border-btn">取消</div>
                        <div class="normal-btn">确定</div>
                    </div>
                </div>
            </div>
        </div>
        <!-- 活动类型 -->
        <div class="dialog-mask" v-show="activityTypeDialog">
            <div class="dailog">
                <div class="header">
                    <span>活动类型</span>
                    <i class="close" @click="activityTypeDialog=false"></i>
                </div>
                <div class="body">
                    <div class="custom-box">
                        <span>该系统字段的描述</span>
                    </div>
                    <div class="form">
                        <el-input v-model="type" type="text" placeholder="标题" maxlength="8" show-word-limit class="marginBottom24"></el-input>
                        <el-input v-model="explain" type="text" placeholder="辅助说明" maxlength="40" show-word-limit class="marginBottom24"></el-input>
                        <div class="switch-box">
                            <label class="label">必填项</label>
                            <el-switch class="switch" v-model="switch3"></el-switch>
                        </div>
                    </div>
                </div>
                <div class="footer">
                    <div class="btn-box">
                        <div class="border-btn">取消</div>
                        <div class="normal-btn">确定</div>
                    </div>
                </div>
            </div>
        </div>
        <!-- 活动时间 -->
        <div class="dialog-mask" v-show="activityTimeDialog">
            <div class="dailog">
                <div class="header">
                    <span>活动时间</span>
                    <i class="close" @click="activityTimeDialog=false"></i>
                </div>
                <div class="body">
                    <div class="custom-box">
                        <span>该系统字段的描述</span>
                    </div>
                    <div class="form">
                        <el-input v-model="time" type="text" placeholder="标题" maxlength="8" show-word-limit class="marginBottom24"></el-input>
                        <el-input v-model="explain" type="text" placeholder="辅助说明" maxlength="40" show-word-limit class="marginBottom24"></el-input>
                        <div class="switch-box">
                            <label class="label">必填项</label>
                            <el-switch class="switch" v-model="switch3"></el-switch>
                            <label class="label">显示时分</label>
                            <el-switch class="switch" v-model="switch3"></el-switch>
                        </div>
                    </div>
                </div>
                <div class="footer">
                    <div class="btn-box">
                        <div class="border-btn">取消</div>
                        <div class="normal-btn">确定</div>
                    </div>
                </div>
            </div>
        </div>
        <!-- 活动形式 -->
        <div class="dialog-mask" v-show="activityFormDialog">
            <div class="dailog choose-field">
                <div class="header">
                    <span>活动形式</span>
                    <i class="close" @click="activityFormDialog=false"></i>
                </div>
                <div class="body">
                    <div class="custom-box">
                        <span>系统字段</span>
                    </div>
                    <div class="form">
                        <el-input v-model="title" type="text" placeholder="标题" maxlength="8" show-word-limit class="marginBottom24"></el-input>
                        <el-input v-model="explain" type="text" placeholder="辅助说明" maxlength="40" show-word-limit class="marginBottom24"></el-input>
                        <div class="input-box">
                            <label class="label">选项1</label>
                            <el-input v-model="type1" type="text" placeholder="请输入" class="weight372"></el-input>
                        </div>
                        <div class="input-box">
                            <label class="label">选项2</label>
                            <el-input v-model="type2" type="text" placeholder="请输入" class="weight372"></el-input>
                        </div>
                        <div class="input-box" v-for="(item,index) in option2">
                            <label class="label">选项{{index + 3}}</label>
                            <el-input v-model="title" type="text" placeholder="请输入" class="weight348"></el-input>
                            <i class="del-circle" @click="delOption2(index)"></i>
                        </div>
                        <div class="add-option" @click="addOption2">
                            <i></i>添加选项
                        </div>
                        <div class="switch-box">
                            <label class="label">必填项</label>
                            <el-switch class="switch" v-model="switch3"></el-switch>
                        </div>
                    </div>
                </div>
                <div class="footer">
                    <div class="btn-box">
                        <div class="border-btn">取消</div>
                        <div class="normal-btn">确定</div>
                    </div>
                </div>
            </div>
        </div>
        <!-- 开关或选择类型 -->
        <div class="dialog-mask" v-show="switchDialog">
            <div class="dailog">
                <div class="header">
                    <span>开关或选择类型</span>
                    <i class="close" @click="switchDialog=false"></i>
                </div>
                <div class="body">
                    <div class="custom-box">
                        <span>开关或选择类型</span>
                    </div>
                    <div class="form">
                        <el-input v-model="title" type="text" placeholder="标题" maxlength="8" show-word-limit class="marginBottom24"></el-input>
                        <el-input v-model="explain" type="text" placeholder="辅助说明" maxlength="40" show-word-limit class="marginBottom8"></el-input>
                    </div>
                </div>
                <div class="footer">
                    <div class="btn-box">
                        <div class="border-btn">取消</div>
                        <div class="normal-btn disable">确定</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div th:replace="pc/include/common_js :: common_js(~{::script})">
        <script src="/static/pc/assets/lib/jquery.min.js" th:src="@{/pc/assets/lib/jquery.min.js}"></script>
        <script src="/static/pc/assets/lib/vue.js" th:src="@{/pc/assets/lib/vue.js}"></script>
        <script src="/static/pc/assets/lib/element-ui/lib/index.js" th:src="@{/pc/assets/lib/element-ui/lib/index.js}"></script>
        <script src="/static/pc/assets/lib/drag/sortTable.js" th:src="@{/pc/assets/lib/drag/sortTable.js}"></script>
        <script src="/static/pc/assets/lib/jqthumb.min.js" th:src="@{/pc/assets/lib/jqthumb.min.js}"></script>
        <script th:inline="javascript">
            vm = new Vue({
                el: '#field-setting',
                data: {
                    fid: [[${fid}]],
                    templates: [[${templates}]],
                    currTemplateId: null,
                    template: {},
                    components: [],
                    templateComponents: [],
                    showTemplateComponents: [],


                    loaded: false,
                    radio1:'1',
                    activityType:'创新创业',
                    delivery1:'',
                    delivery2:false,
                    person:'自定义人数',
                    title:'',
                    explain:'',
                    switch1:false,
                    switch2:false,
                    name:'活动名称',
                    switch3:true,
                    type:'活动类型',
                    time:'活动时间',
                    type1:'线上活动',
                    type2:'线下活动',
                    option1:[{
                        title:'',
                    },
                        {
                            title:'',
                        }],
                    option2:[{
                        title:'',
                    },
                        {
                            title:'',
                        }],
                    delclick: true,
                    textDialog:false,
                    addFieldDialog:false,
                    chooseDialog:false,
                    partitionDialog:false,
                    delDialog:false,
                    activityNameDialog:false,
                    activityTimeDialog:false,
                    activityTypeDialog:false,
                    activityFormDialog:false,
                    switchDialog:false
                },
                watch: {
                    /* 监听选项列表的改变 */
                    option1: function () {
                        if(this.option1.length <= 1){
                            this.delclick = false
                        }else{
                            this.delclick = true
                        }
                    }
                },
                mounted: function () {
                    var $this = this;
                    $this.init()
                },
                methods:{
                    init: function () {
                        $(function(){
                            $('.jqthumbImg').jqthumb({
                                width: '100%',
                                height: '100%'
                            });
                            $("#drag-box").sortable({
                                scroll: true,
                                axis: "y",
                                dalay: 300,
                                handle: ".icon-drag",
                                start: function () {
                                    $("#dragBubble").hide()
                                },
                            });
                            $('.icon-drag').on('mouseenter', function (e) {
                                var $event = $(e.target);
                                var top = $event.offset().top - 39;
                                var left = $event.offset().left - 40;
                                $('#dragBubble').css({
                                    top: top,
                                    left: left
                                }).show()
                            })
                            $('.icon-drag').on('mouseleave', function (e) {
                                $('#dragBubble').hide()
                            })
                            /* 添加字段弹窗 */
                            $('.add-btn .icon-add').click(function() {
                                $(this).hide()
                                $(this).siblings('.aready').show()
                                $(this).parents('.field-item').addClass('aready-add')
                            })
                            $('.add-btn .remove').click(function() {
                                $(this).hide()
                                $(this).siblings('.icon-add').show()
                                $(this).parents('.field-item').removeClass('aready-add')
                            })
                            $('.field-item').mouseenter(function() {
                                if($(this).hasClass('aready-add')){
                                    $(this).find('.remove').show()
                                    $(this).find('.aready').hide()
                                }
                            })
                            $('.field-item').mouseleave(function() {
                                if($(this).hasClass('aready-add')){
                                    $(this).find('.remove').hide()
                                    $(this).find('.aready').show()
                                }
                            })
                        })
                    },
                    // 调整右下角加号位置
                    fixRightEndBtnStyle: function () {
                        /* 右下角加号的位置 */
                        var right = $('.w-900px.info-box').offset().left + 50
                        $('#add-circle').css('right', right)
                        $(window).resize(function () {
                            var right = $('.w-900px.info-box').offset().left + 50
                            $('#add-circle').css('right', right)
                        })
                    },
                    templateChange: function (templateId) {
                        var $this = this;
                        $this.currTemplateId = templateId;
                        $this.loadTemplateInfo();
                    },
                    loadTemplateInfo: function () {
                        var $this = this;
                        var url = ctx + "/api/activity/engine/info";
                        var params = {
                            fid: $this.fid,
                            templateId: $this.currTemplateId
                        }
                        $this.loaded = false;
                        app.ajaxPost(url, params, function (res) {
                            $this.loaded = true;
                            if (res.success) {
                                var { template, components, templateComponents } = res.data
                                $this.template = template;
                                $this.components = components;
                                $this.templateComponents = templateComponents;
                                $this.calShowComponents();
                                $this.$nextTick(function () {
                                    $this.fixRightEndBtnStyle();
                                })
                            } else {
                                var errorMessage = res.message;
                                if (activityApp.isEmpty(errorMessage)) {
                                    errorMessage = "加载模板数据失败";
                                }
                                app.showMsg(errorMessage);
                            }
                        }, function () {
                            $this.loaded = true;
                            app.showMsg("加载模板数据失败");
                        });
                    },
                    calShowComponents: function() {
                        var $this = this;
                        $($this.templateComponents).each(function () {
                            var tplComponent = $.extend({}, this);
                            var componentId = tplComponent.componentId;
                            $($this.components).each(function () {
                                if (componentId === this.id) {
                                    // 封装component 详情到 templateComponent里面
                                    tplComponent.component = $.extend({}, this);
                                    $this.showTemplateComponents.push(tplComponent);
                                    return false;
                                }
                            });
                        });
                    },
                    // 返回
                    returnBack: function () {
                        window.location.reload();
                    },
                    // 发布数据
                    publish: function () {
                        var $this = this;
                        var submitData = $this.packageData();
                        var url = ctx + "/api/activity/engine/publish";

                        // app.ajaxPost(url, { templateInfoStr: activityApp.getJsonStr(submitData) }, function (res) {
                        //     if (res.success) {
                        //         app.showMsg("发布成功", function () {
                        //             window.location.reload();
                        //         });
                        //     } else {
                        //         var errorMessage = res.message;
                        //         if (activityApp.isEmpty(errorMessage)) {
                        //             errorMessage = "发布失败";
                        //         }
                        //         app.showMsg(errorMessage);
                        //     }
                        // }, function () {
                        //     app.showMsg("发布失败");
                        // });

                    },
                    packageData: function () {
                        var template = $.extend({}, $this.template);
                        var templateComponents = [];
                        $($this.showTemplateComponents).each(function () {
                            templateComponents.push({
                                id: this.id,
                                templateId: $this.templateId,
                                componentId: this.componentId,
                                name: this.name,
                                introduction: this.introduction,
                                required: this.required,
                                sequence: this.sequence

                            });
                        });
                        return {
                            template: template,
                            components: $this.components,
                            templateComponents: templateComponents
                        }
                    },
                    addOption1: function(){
                        this.option1.push({title: ''})
                    },
                    delOption1: function(index){
                        if(this.delclick){
                            this.option1.splice(index,1);
                        }
                    },
                    addOption2: function(){
                        this.option2.push({title: ''})
                    },
                    delOption2: function(index){
                        this.option2.splice(index,1);
                    }
                }
            })
        </script>
    </div>
</body>
</html>